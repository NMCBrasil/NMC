
<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gerador de Carimbos</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 700px;
    margin: 20px auto;
    padding: 0 15px;
  }
  label {
    font-weight: bold;
    display: block;
    margin-top: 10px;
  }
  input[type="text"],
  input[type="datetime-local"],
  textarea {
    width: 100%;
    box-sizing: border-box;
    margin-top: 5px;
    font-size: 14px;
    padding: 6px;
  }
  textarea {
    resize: vertical;
    min-height: 60px;
  }
  button {
    margin-top: 15px;
    padding: 10px 15px;
    font-size: 16px;
    cursor: pointer;
  }
  #carimbo {
    white-space: pre-line;
    margin-top: 20px;
    border: 1px solid #ddd;
    padding: 15px;
    background-color: #f9f9f9;
    font-family: monospace;
    font-size: 14px;
    line-height: 1.1; /* menor espaçamento entre linhas */
  }
</style>
</head>
<body>

<h2>Gerador de Carimbo - Abertura</h2>
<form id="formAbertura">
  <label for="dataHoraInicio">Data e Hora do Início da Falha:</label>
  <input type="datetime-local" id="dataHoraInicio" name="dataHoraInicio" />

  <label for="tecnologia">Tecnologia:</label>
  <input type="text" id="tecnologia" name="tecnologia" />

  <label for="clientesAfetados">Cliente(s) Afetado(s):</label>
  <input type="text" id="clientesAfetados" name="clientesAfetados" />

  <label for="descricaoAlarmes">Descrição do(s) Alarme(s):</label>
  <textarea id="descricaoAlarmes" name="descricaoAlarmes"></textarea>

  <label for="descricaoEquipamentos">Descrição do(s) Equipamento(s):</label>
  <textarea id="descricaoEquipamentos" name="descricaoEquipamentos"></textarea>

  <label for="linkDiagrama">Link do Diagrama (opcional):</label>
  <input type="text" id="linkDiagrama" name="linkDiagrama" />

  <button type="button" onclick="gerarCarimboAbertura()">Gerar Carimbo</button>
</form>

<h2>Gerador de Carimbo - Encerramento</h2>
<form id="formEncerramento">
  <label for="dataHoraSolucao">Data e Hora da Solução:</label>
  <input type="datetime-local" id="dataHoraSolucao" name="dataHoraSolucao" />

  <label for="clientesAtendidos">Cliente(s) Atendido(s):</label>
  <input type="text" id="clientesAtendidos" name="clientesAtendidos" />

  <label for="acoesNMC">Ações Realizadas pelo NMC:</label>
  <textarea id="acoesNMC" name="acoesNMC"></textarea>

  <label for="anexosLogs">Anexos de Logs (opcional):</label>
  <input type="text" id="anexosLogs" name="anexosLogs" />

  <button type="button" onclick="gerarCarimboEncerramento()">Gerar Carimbo</button>
</form>

<button onclick="copiarCarimbo()" style="margin-top:15px;">Copiar Carimbo</button>

<div id="carimbo"></div>

<script>
function pad(str) {
  return str && str.trim() !== '' ? str.trim() : '(não informado)';
}

function formatDataHora(dataHora) {
  if (!dataHora) return '(não informado)';
  const dt = new Date(dataHora);
  if (isNaN(dt)) return '(não informado)';
  return dt.toLocaleString('pt-BR', { 
    day: '2-digit', month: '2-digit', year: 'numeric', 
    hour: '2-digit', minute: '2-digit', second: '2-digit' 
  });
}

function gerarCarimboAbertura() {
  const dataHoraInicio = formatDataHora(document.getElementById('dataHoraInicio').value);
  const tecnologia = pad(document.getElementById('tecnologia').value);
  const clientesAfetados = pad(document.getElementById('clientesAfetados').value);
  const descricaoAlarmes = pad(document.getElementById('descricaoAlarmes').value);
  const descricaoEquipamentos = pad(document.getElementById('descricaoEquipamentos').value);
  const linkDiagrama = document.getElementById('linkDiagrama').value.trim();

  let texto = '';
  texto += `Data e Hora do Início da Falha: ${dataHoraInicio}\n`;
  texto += `Tecnologia: ${tecnologia}\n`;
  texto += `Cliente(s) Afetado(s): ${clientesAfetados}\n`;
  texto += `Descrição do(s) Alarme(s): ${descricaoAlarmes}\n`;
  texto += `Descrição do(s) Equipamento(s): ${descricaoEquipamentos}`;
  if (linkDiagrama !== '') {
    texto += `\nLink do Diagrama: ${linkDiagrama}`;
  }

  document.getElementById('carimbo').textContent = texto;
}

function gerarCarimboEncerramento() {
  const dataHoraSolucao = formatDataHora(document.getElementById('dataHoraSolucao').value);
  const clientesAtendidos = pad(document.getElementById('clientesAtendidos').value);
  const acoesNMC = pad(document.getElementById('acoesNMC').value);
  const anexosLogs = document.getElementById('anexosLogs').value.trim();

  let texto = '';
  texto += `Data e Hora da Solução: ${dataHoraSolucao}\n`;
  texto += `Cliente(s) Atendido(s): ${clientesAtendidos}\n`;
  texto += `Ações Realizadas pelo NMC: ${acoesNMC}`;
  if (anexosLogs !== '') {
    texto += `\nAnexos de Logs: ${anexosLogs}`;
  }

  document.getElementById('carimbo').textContent = texto;
}

function copiarCarimbo() {
  const carimbo = document.getElementById('carimbo').textContent;
  if (!carimbo) return alert('Nenhum carimbo gerado para copiar.');
  navigator.clipboard.writeText(carimbo).then(() => {
    // Mensagem simples sem modal de confirmação
    const msg = document.createElement('div');
    msg.textContent = 'Carimbo copiado para a área de transferência.';
    msg.style.position = 'fixed';
    msg.style.bottom = '10px';
    msg.style.right = '10px';
    msg.style.backgroundColor = '#4caf50';
    msg.style.color = '#fff';
    msg.style.padding = '8px 12px';
    msg.style.borderRadius = '5px';
    msg.style.fontSize = '14px';
    document.body.appendChild(msg);
    setTimeout(() => document.body.removeChild(msg), 2000);
  });
}
</script>

</body>
</html>
